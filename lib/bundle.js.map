{"version":3,"sources":["webpack:///webpack/bootstrap f993b0c9663e28ae2bed","webpack:///./lib/enclose.js","webpack:///./lib/game.js","webpack:///./lib/marble.js","webpack:///./lib/util.js","webpack:///./lib/moving_object.js","webpack:///./lib/ship.js","webpack:///./lib/astar.js","webpack:///(webpack)/buildin/module.js","webpack:///./lib/game_view.js"],"names":["Game","require","GameView","closeGameOver","$","removeClass","closeInstruction","showRules","addClass","startGame","window","newGame","document","addEventListener","canvasEl","getElementsByTagName","width","DIM_X","height","DIM_Y","ctx","getContext","game","gameView","start","leftInterval","rightInterval","upInterval","downInterval","keyup","e","keyCode","click","keydown","setInterval","ship","power","clearInterval","Marble","Ship","Util","Astar","Graph","astar","marbles","ships","holdShip","safePositions","Set","shapesArray","linesArray","seenPositions","seenSet","x_limit","y_limit","level","lives","addMarbles","searchGrid","createSearchGrid","initializeBoard","started","nextLevel","bind","pos","nextLevelPage","updateLives","thisLevel","getElementById","clear","thisLevelText","findLevel","appendChild","createTextNode","updateLevel","nextLevelText","setTimeout","arr","i","temp","j","push","left","add","toString","right","top","bottom","end","returnArr","graph","graphStart","grid","graphEnd","result","search","length","x","parseInt","y","object","NUM_MARBLES","concat","allObjects","obj1","obj2","isCollidedWith","collision","collideWith","clearRect","fillStyle","BG_COLOR","fillRect","drawSeen","drawShapes","drawOutlines","forEach","draw","percent","findFilledPercent","toFixed","updatePercent","imageData","getImageData","data","black","white","element","lastChild","removeChild","text","parent","textNode","Math","round","seen","startX","startY","endX","endY","strokeStyle","lineWidth","beginPath","moveTo","lineTo","stroke","closePath","has","fillBordersArray","pathFinder","updateSearchGrid","checkMarbles","addSafePoints","shapeArray","x_min","x_max","y_min","y_max","cur_pos","rayCasting","slice","set","radius","min_x","max_x","min_y","max_y","marblePos","marble","point","vs","inside","xi","yi","xj","yj","intersect","relocate","showGameOver","currentArray","fill","roundPos","bounce","pointInCircle","delta","move","random","splice","indexOf","moveObjects","checkCollisions","wrap","FPS","module","exports","MovingObject","DEFAULTS","COLOR","RADIUS","SPEED","options","color","randomPosition","vel","randomVec","otherObject","dir","vec","norm","scale","dist","pos1","pos2","sqrt","pow","deg","PI","sin","cos","m","coord","max","isWrappable","arc","centerDist","timeDelta","loseLife","hitWall","next_vel","checkRebound","velocityScale","NORMAL_FRAME_TIME_DELTA","offsetX","offsetY","found","firstPos","set1","secondPos","set2","count","remove","randomColor","hexDigits","floor","impulse","current_pos","next_pos","newPos","definition","define","pathTo","node","curr","path","unshift","getHeap","BinaryHeap","f","cleanDirty","heuristic","heuristics","manhattan","closest","openHeap","closestNode","h","markDirty","size","currentNode","pop","closed","neighbors","il","neighbor","isWall","gScore","g","getCost","beenVisited","visited","rescoreElement","pos0","d1","abs","d2","diagonal","D","D2","min","cleanNode","gridIn","nodes","row","GridNode","init","prototype","dirtyNodes","ret","graphString","rowDebug","weight","join","fromNeighbor","scoreFunction","content","sinkDown","bubbleUp","n","parentN","elemScore","child2N","child1N","swap","child1Score","child1","child2","child2Score","addShip","Object","keys","MOVES","k","key","lastTime","requestAnimationFrame","animate","time","step"],"mappings":"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","file":"./lib/bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap f993b0c9663e28ae2bed","const Game = require(\"./game\");\nconst GameView = require(\"./game_view\");\n\nfunction closeGameOver(){\n  $(\".restart-button\").removeClass(\"show\");\n}\n\nfunction closeInstruction(){\n  $(\".instruction-section\").removeClass(\"show\");\n}\n\nfunction showRules(){\n  $(\".instruction-section\").addClass(\"show\");\n}\n\nfunction startGame(){\n  $(\".welcome-page\").removeClass(\"show\");\n  window.newGame();\n}\n\n\ndocument.addEventListener(\"DOMContentLoaded\", function(){\n  const canvasEl = document.getElementsByTagName(\"canvas\")[0];\n  canvasEl.width = Game.DIM_X;\n  canvasEl.height = Game.DIM_Y;\n\n  const ctx = canvasEl.getContext(\"2d\");\n  const game = new Game();\n  const gameView = new GameView(game, ctx);\n  gameView.start();\n  window.newGame = game.newGame;\n  window.showRules = showRules;\n  window.startGame = startGame;\n\n\n\n\n  let leftInterval;\n  let rightInterval;\n  let upInterval;\n  let downInterval;\n\n  $(document).keyup(function(e) {\n    if(e.keyCode === 27){\n      closeGameOver();\n      closeInstruction();\n    }\n  });\n\n  $(\".instruction-section\").click(() => {\n    $(\".instruction-section\").removeClass(\"show\");\n  });\n\n  $(document).keydown(function(e) {\n    if(e.keyCode === 37){\n      if (!leftInterval) {\n        leftInterval = window.setInterval(() => {\n          gameView.ship.power([-10, 0]);\n        }, 125);\n      }\n    }if(e.keyCode === 38){\n      if (!upInterval) {\n        upInterval = window.setInterval(() => {\n          gameView.ship.power([0,  -10]);\n        }, 125);\n      }\n    }if(e.keyCode === 39){\n      if (!rightInterval) {\n        rightInterval = window.setInterval(() => {\n          gameView.ship.power([10,  0]);\n        }, 125);\n      }\n    }if(e.keyCode === 40){\n      if (!downInterval) {\n        downInterval = window.setInterval(() => {\n          gameView.ship.power([0,  10]);\n        }, 125);\n      }\n    }\n  });\n\n  $(document).keyup(function(e) {\n    if(e.keyCode === 37){\n      window.clearInterval(leftInterval);\n      leftInterval = null;\n    }if(e.keyCode === 38){\n      window.clearInterval(upInterval);\n      upInterval = null;\n    }if(e.keyCode === 39){\n      window.clearInterval(rightInterval);\n      rightInterval = null;\n    }if(e.keyCode === 40){\n      window.clearInterval(downInterval);\n      downInterval = null;\n    }\n  });\n\n});\n\n\n\n// WEBPACK FOOTER //\n// ./lib/enclose.js","const Marble = require(\"./marble\");\nconst Ship = require(\"./ship\");\nconst Util = require(\"./util\");\nconst Astar = require(\"./astar\");\nconst Graph = Astar.Graph;\nconst astar = Astar.astar;\n\n\nclass Game {\n  constructor() {\n    this.marbles = [];\n    this.ships = [];\n    this.holdShip = null;\n    this.safePositions = new Set();\n    this.shapesArray = [];\n    this.linesArray = [];\n    this.seenPositions = [];\n    this.seenSet = new Set();\n    this.x_limit = Game.DIM_X;\n    this.y_limit = Game.DIM_Y;\n    this.level = 4;\n    this.lives = 5;\n    this.addMarbles(this.level);\n    this.searchGrid = this.createSearchGrid();\n    this.initializeBoard();\n    this.started = false;\n    this.nextLevel = this.nextLevel.bind(this);\n    this.newGame = this.newGame.bind(this);\n  }\n\n  nextLevel(){\n    this.ships[0].pos = [0,0];\n    this.marbles = [];\n    this.safePositions = new Set();\n    this.shapesArray = [];\n    this.linesArray = [];\n    this.seenPositions = [];\n    this.seenSet = new Set();\n    this.lives = 5;\n    this.nextLevelPage();\n    this.updateLives();\n    this.addMarbles(this.level);\n    this.searchGrid = this.createSearchGrid();\n    this.initializeBoard();\n    this.started = false;\n  }\n\n  nextLevelPage(){\n    const thisLevel = document.getElementById(\"this-level-text\");\n    const nextLevel = document.getElementById(\"next-level-text\");\n    this.clear(thisLevel);\n    this.clear(nextLevel);\n    const thisLevelText = this.findLevel(this.level);\n    thisLevel.appendChild(document.createTextNode(thisLevelText));\n    this.level += 2;\n    this.updateLevel(this.findLevel(this.level));\n    const nextLevelText = this.findLevel(this.level);\n    nextLevel.appendChild(document.createTextNode(nextLevelText));\n    $(\".next-level-container\").addClass(\"show\");\n    window.setTimeout(() => {\n      $(\".next-level-container\").removeClass(\"show\");\n    }, 3000);\n  }\n\n  newGame(){\n    this.ships[0].pos = [0,0];\n    this.holdShip = null;\n    this.marbles = [];\n    this.safePositions = new Set();\n    this.shapesArray = [];\n    this.linesArray = [];\n    this.seenPositions = [];\n    this.seenSet = new Set();\n    this.level = 4;\n    this.lives = 5;\n    this.updateLives();\n    this.updateLevel(this.findLevel(this.level));\n    this.addMarbles(this.level);\n    this.searchGrid = this.createSearchGrid();\n    this.initializeBoard();\n    this.started = false;\n    $(\".restart-button\").removeClass(\"show\");\n  }\n\n  createSearchGrid() {\n    const arr = [];\n    for(let i = 0; i <= 60; i++){\n      const temp = [];\n      for(let j = 0; j <= 100; j++){\n        temp.push(0);\n      }\n      arr.push(temp);\n    }\n    return arr;\n  }\n\n  initializeBoard() {\n    for(let i = 0; i <= Game.DIM_Y; i += 10){\n      const left = [0,i];\n      this.safePositions.add(left.toString());\n      const right = [Game.DIM_X, i];\n      this.safePositions.add(right.toString());\n      this.searchGrid[i/10][0] = 1;\n      this.searchGrid[i/10][Game.DIM_X/10] = 1;\n    }\n    for(let i = 0; i <= Game.DIM_X; i += 10){\n      const top = [i,0];\n      this.safePositions.add(top.toString());\n      const bottom = [i, Game.DIM_Y];\n      this.safePositions.add(bottom.toString());\n      this.searchGrid[0][i/10] = 1;\n      this.searchGrid[Game.DIM_Y/10][i/10] = 1;\n    }\n  }\n\n  pathFinder(start, end){\n    const returnArr = [];\n    const graph = new Graph(this.searchGrid);\n    let graphStart = graph.grid[start[1]/10][start[0]/10];\n    let graphEnd = graph.grid[end[1]/10][end[0]/10];\n    const result = astar.search(graph, graphStart, graphEnd);\n    for (let i = 0; i < result.length; i++){\n      const x = parseInt(result[i].y) * 10;\n      const y = parseInt(result[i].x) * 10;\n      returnArr.push([x,y]);\n    }\n    return returnArr;\n  }\n\n\n  add(object) {\n    if (object instanceof Marble) {\n      this.marbles.push(object);\n    } else if (object instanceof Ship) {\n      this.ships.push(object);\n    } else {\n      throw \"wtf?\";\n    }\n  }\n\n  addMarbles(level) {\n    for (let i = 0; i < Game.NUM_MARBLES; i++) {\n      this.add(new Marble(level, { game: this }));\n    }\n  }\n\n  addShip(ctx) {\n    const ship = new Ship({\n      pos: [0,0],\n      game: this,\n      ctx: ctx\n    });\n\n    this.add(ship);\n\n    return ship;\n  }\n\n  allObjects() {\n    return [].concat(this.ships, this.marbles);\n  }\n\n  checkCollisions() {\n    const allObjects = this.allObjects();\n    for (let i = 0; i < allObjects.length; i++) {\n      for (let j = 0; j < allObjects.length; j++) {\n        const obj1 = allObjects[i];\n        const obj2 = allObjects[j];\n\n        if (obj1.isCollidedWith(obj2)) {\n          const collision = obj1.collideWith(obj2);\n          if (collision) return;\n        }\n      }\n    }\n  }\n\n  draw(ctx) {\n    if(this.lives > 0){\n      ctx.clearRect(0, 0, Game.DIM_X, Game.DIM_Y);\n      ctx.fillStyle = Game.BG_COLOR;\n      ctx.fillRect(0, 0, Game.DIM_X, Game.DIM_Y);\n\n      this.drawSeen(ctx);\n      this.drawShapes(ctx);\n      this.drawOutlines(ctx);\n\n      this.allObjects().forEach((object) => {\n        object.draw(ctx);\n      });\n\n      if(this.seenPositions.length === 0){\n        const percent = (this.findFilledPercent(ctx) * 100).toFixed(0);\n        if(percent > 69){\n          this.nextLevel();\n          this.updateLevel(this.findLevel(level));\n        }\n        this.updatePercent(percent);\n      }\n    }\n  }\n\n  findFilledPercent(ctx){\n    const imageData = ctx.getImageData(0, 0, Game.DIM_X, Game.DIM_Y);\n    const data = imageData.data;\n    let black = 0;\n    let white = 0;\n    for (let i = 0; i < data.length; i += 40){\n      if(data[i] === 0){\n        black++;\n      } else if(data[i] === 255){\n        white ++;\n      }\n    }\n    const percent = (white/(white+black));\n    return percent;\n  }\n\n  clear (element) {\n    while (element.lastChild) {\n      element.removeChild (element.lastChild);\n    }\n  }\n\n  updatePercent(text)\n  {\n    const parent = document.getElementById(\"percent\");\n    const textNode = document.createTextNode(text);\n    this.clear(parent);\n    parent.appendChild(textNode);\n  }\n\n  findLevel(level){\n    level = Math.round(((this.level - 4) / 2) + 1);\n    return level;\n  }\n\n  updateLevel(text){\n    const parent = document.getElementById(\"level\");\n    const textNode = document.createTextNode(text);\n    this.clear(parent);\n    parent.appendChild(textNode);\n  }\n\n  updateLives(){\n    const parent = document.getElementById(\"lives\");\n    const textNode = document.createTextNode(this.lives);\n    this.clear(parent);\n    parent.appendChild(textNode);\n  }\n\n\n  drawSeen(ctx){\n    let seen = this.seenPositions;\n    if(seen.length > 1){\n      for (let i = 0; i < seen.length - 1; i++){\n        const startX = seen[i][0];\n        const startY = seen[i][1];\n        const endX = seen[i+1][0];\n        const endY = seen[i+1][1];\n        ctx.strokeStyle = \"white\";\n        ctx.lineWidth = 1;\n        ctx.beginPath();\n        ctx.moveTo(startX, startY);\n        ctx.lineTo(endX, endY);\n        ctx.stroke();\n      }\n      ctx.closePath();\n      if(this.safePositions.has(seen[seen.length-1].toString())){\n        const start = [seen[0][0], seen[0][1]];\n        const end = [seen[seen.length-1][0], seen[seen.length-1][1]];\n        const fillBordersArray = this.pathFinder(end, start);\n        seen = seen.concat(fillBordersArray);\n        seen.forEach((pos) => {\n          this.updateSearchGrid(pos);\n          this.safePositions.add(pos.toString());\n        });\n        if(this.checkMarbles(seen)){\n          this.linesArray.push(seen);\n        } else {\n          this.shapesArray.push(seen);\n          this.addSafePoints(seen);\n        }\n        this.seenPositions = [];\n        this.seenSet = new Set();\n        this.started = false;\n      }\n    }\n  }\n\n  updateSearchGrid(pos){\n    const y = pos[0]/10;\n    const x = pos[1]/10;\n    this.searchGrid[x][y] = 1;\n  }\n\n  addSafePoints(shapeArray){\n    let x_min = shapeArray[0][0];\n    let x_max = shapeArray[0][0];\n    let y_min = shapeArray[0][1];\n    let y_max = shapeArray[0][1];\n    for (let i = 0; i < shapeArray.length; i++){\n      const cur_pos = [shapeArray[i][0], shapeArray[i][1]];\n      if (cur_pos[0] < x_min){\n        x_min = cur_pos[0];\n      }\n      if (cur_pos[0] > x_max){\n        x_max = cur_pos[0];\n      }\n      if (cur_pos[1] < y_min){\n        y_min = cur_pos[1];\n      }\n      if (cur_pos[1] > y_max){\n        y_max = cur_pos[1];\n      }\n    }\n    for (let x = x_min; x <= x_max; x += 10){\n      for (let y = y_min; y <= y_max; y += 10){\n        let pos = [x, y];\n        if(this.rayCasting(pos, shapeArray.slice(1))){\n          this.safePositions.add(pos.toString());\n        }\n      }\n    }\n  }\n\n  pointInCircle(pos, set){\n    const radius = this.marbles[0].radius;\n\n    const min_x = pos[0] - radius;\n    const max_x = pos[0] + radius;\n    const min_y = pos[1] - radius;\n    const max_y = pos[1] + radius;\n\n    for (let i = min_x; i <= max_x; i++){\n      for (let j = min_y; j <= max_y; j++){\n        if(set.has([i,j].toString())){\n          return true;\n        }\n      }\n    }\n    return false;\n  }\n\n  checkMarbles(shapeArray){\n    const marblePos = [];\n    this.marbles.forEach((marble) => {\n      marblePos.push([Math.round(marble.pos[0]), Math.round(marble.pos[1])]);\n    });\n\n    for(let i = 0; i < marblePos.length; i++){\n      if(this.rayCasting(marblePos[i], shapeArray)){\n        return true;\n      }\n    }\n  }\n\n  rayCasting(point, vs) {\n\n    let x = point[0], y = point[1];\n\n    let inside = false;\n    for (let i = 0, j = vs.length - 1; i < vs.length; j = i++) {\n      let xi = vs[i][0], yi = vs[i][1];\n      let xj = vs[j][0], yj = vs[j][1];\n\n      let intersect = ((yi > y) != (yj > y)) && (x < (xj - xi) * (y - yi) / (yj - yi) + xi);\n      if (intersect) {\n        inside = !inside;\n      }\n    }\n\n    return inside;\n  }\n\n  loseLife(){\n    this.ships[0].relocate([this.seenPositions[0][0], this.seenPositions[0][1]]);\n    this.seenPositions = [];\n    this.seenSet = new Set();\n    this.started = false;\n    this.lives -= 1;\n    if(this.lives <= 0){\n      this.updateLives();\n      this.showGameOver();\n\n    } else{\n      this.updateLives();\n    }\n  }\n\n  showGameOver() {\n    $(\".restart-button\").addClass(\"show\");\n  }\n\n  drawShapes(ctx) {\n    if(this.shapesArray.length > 0){\n      for (let i = 0; i < this.shapesArray.length; i++){\n        const currentArray = this.shapesArray[i];\n        ctx.beginPath();\n        ctx.moveTo(currentArray[0][0], currentArray[0][1]);\n        for (let j = 0; j < currentArray.length; j++){\n          ctx.lineTo(currentArray[j][0], currentArray[j][1]);\n        }\n        ctx.closePath();\n        ctx.fillStyle = \"white\";\n        ctx.fill();\n      }\n    }\n  }\n\n  drawOutlines(ctx) {\n    if(this.linesArray.length > 0){\n      for (let i = 0; i < this.linesArray.length; i++){\n        const currentArray = this.linesArray[i];\n        ctx.beginPath();\n        ctx.moveTo(currentArray[0][0], currentArray[0][1]);\n        for (let j = 0; j < currentArray.length; j++){\n          ctx.lineTo(currentArray[j][0], currentArray[j][1]);\n        }\n        ctx.closePath();\n        ctx.strokeStyle = \"white\";\n        ctx.stroke();\n      }\n    }\n  }\n\n  hitWall(pos) {\n    const roundPos = [Math.round(pos[0]), Math.round(pos[1])];\n    return this.bounce(roundPos);\n  }\n\n  bounce(pos){\n    if(pos[0] <= 0 || pos[0] >= Game.DIM_X || pos[1] <= 0 || pos[1] >= Game.DIM_Y || this.pointInCircle(pos, this.safePositions)){\n      return true;\n    }\n    return false;\n  }\n\n  moveObjects(delta) {\n    this.marbles.forEach((object) => {\n      object.move(delta);\n    });\n  }\n\n  randomPosition() {\n    return [\n      (((Game.DIM_X-200) * Math.random()) + 100),\n      (((Game.DIM_Y-100) * Math.random()) + 50)\n    ];\n  }\n\n  remove(object) {\n    if (object instanceof Marble) {\n      this.marbles.splice(this.marbles.indexOf(object), 1);\n    } else {\n      throw \"wtf?\";\n    }\n  }\n\n  step(delta) {\n    this.moveObjects(delta);\n    this.checkCollisions();\n  }\n\n  wrap(pos) {\n    return [\n      Util.wrap(pos[0], Game.DIM_X), Util.wrap(pos[1], Game.DIM_Y)\n    ];\n  }\n}\n\nGame.BG_COLOR = \"#000000\";\nGame.DIM_X = 1000;\nGame.DIM_Y = 600;\nGame.FPS = 32;\nGame.NUM_MARBLES = 5;\n\nmodule.exports = Game;\n\n\n\n// WEBPACK FOOTER //\n// ./lib/game.js","const Util = require(\"./util\");\nconst MovingObject = require(\"./moving_object\");\nconst Ship = require(\"./ship\");\n\nconst DEFAULTS = {\n\tCOLOR: \"#505050\",\n\tRADIUS: 15,\n\tSPEED: 5\n};\n\nclass Marble extends MovingObject {\n    constructor(level, options = {}) {\n      options.color = DEFAULTS.COLOR;\n      options.pos = options.pos || options.game.randomPosition();\n      options.radius = DEFAULTS.RADIUS;\n      options.vel = Util.randomVec(level);\n\t\t\tsuper(options);\n    }\n\n    collideWith(otherObject) {\n      if (otherObject instanceof Ship) {\n\t\t\t\tif(this.game.safePositions.has(otherObject.pos.toString())){\n\t\t\t\t\treturn false;\n\t\t\t\t} else{\n\n\t\t\t\t}\n      return true;\n      }\n    }\n}\n\nmodule.exports = Marble;\n\n\n\n// WEBPACK FOOTER //\n// ./lib/marble.js","const Util = {\n  // Normalize the length of the vector to 1, maintaining direction.\n  dir (vec) {\n    const norm = Util.norm(vec);\n    return Util.scale(vec, 1 / norm);\n  },\n  // Find distance between two points.\n  dist (pos1, pos2) {\n    return Math.sqrt(\n      Math.pow(pos1[0] - pos2[0], 2) + Math.pow(pos1[1] - pos2[1], 2)\n    );\n  },\n  // Find the length of the vector.\n  norm (vec) {\n    return Util.dist([0, 0], vec);\n  },\n  // Return a randomly oriented vector with the given length.\n  randomVec (length) {\n    const deg = 2 * Math.PI * Math.random();\n    return Util.scale([Math.sin(deg), Math.cos(deg)], length);\n  },\n  // Scale the length of a vector by the given amount.\n  scale (vec, m) {\n    return [vec[0] * m, vec[1] * m];\n  },\n\n  wrap (coord, max) {\n    if (coord < 0) {\n      return max - (coord % max);\n    } else if (coord > max) {\n      return coord % max;\n    } else {\n      return coord;\n    }\n  }\n};\n\nmodule.exports = Util;\n\n\n\n// WEBPACK FOOTER //\n// ./lib/util.js","const Util = require(\"./util\");\n\nclass MovingObject {\n  constructor(options) {\n    this.pos = options.pos;\n    this.vel = options.vel;\n    this.radius = options.radius;\n    this.color = options.color;\n    this.game = options.game;\n    this.isWrappable = true;\n    this.ctx = options.ctx;\n  }\n\n  collideWith(otherObject) {\n    // default do nothing\n  }\n\n  draw(ctx) {\n    if(this === this.game.ships[0]){\n      if(this.game.safePositions.has(this.pos.toString())){\n        this.color = \"green\";\n      } else {\n        this.color = \"red\";\n      }\n    }\n    ctx.fillStyle = this.color;\n\n    ctx.beginPath();\n    ctx.arc(\n      this.pos[0], this.pos[1], this.radius, 0, 2 * Math.PI, true\n    );\n    ctx.fill();\n  }\n\n  isCollidedWith(otherObject) {\n    const centerDist = Util.dist(this.pos, otherObject.pos);\n    return centerDist < (this.radius + otherObject.radius);\n  }\n\n  move(timeDelta) {\n    //timeDelta is number of milliseconds since last move\n    //if the computer is busy the time delta will be larger\n    //in this case the MovingObject should move farther in this frame\n    //velocity of object is how far it should move in 1/60th of a second\n    const cur_pos = [Math.round(this.pos[0]), Math.round(this.pos[1])];\n\n    if(this.game.pointInCircle(cur_pos, this.game.seenSet)){\n      this.game.loseLife();\n    }\n\n    if(this.game.hitWall(cur_pos)){\n      const next_vel = this.checkRebound(cur_pos, this.vel);\n      if(next_vel === \"x\"){\n        this.vel[0] = -this.vel[0];\n      } else if(next_vel === \"y\"){\n        this.vel[1] = -this.vel[1];\n      } else {\n        this.vel[0] = -this.vel[0];\n        this.vel[1] = -this.vel[1];\n      }\n    }\n\n    const velocityScale = timeDelta / NORMAL_FRAME_TIME_DELTA;\n    let offsetX = this.vel[0] * velocityScale;\n    let offsetY = this.vel[1] * velocityScale;\n    this.pos = [(this.pos[0] + offsetX), (this.pos[1] + offsetY)];\n  }\n\n  checkRebound(pos, vel){\n    let x;\n    let y;\n    let found = false;\n    if (vel[0] < 0){\n      x = -1;\n    } else {\n      x = 1;\n    }\n    if (vel[1] < 0){\n      y = -1;\n    } else {\n      y = 1;\n    }\n\n    let firstPos = pos.slice();\n    const set1 = [-x, y];\n\n    let secondPos = pos.slice();\n    const set2 = [x, -y];\n    let count = 0;\n    while(!found && count < 10){\n      firstPos = [(firstPos[0] + set1[0]), (firstPos[1] + set1[1])];\n      secondPos = [(secondPos[0] + set2[0]), (secondPos[1] + set2[1])];\n      if(!this.game.hitWall(firstPos)){\n        found = \"firstPos\";\n      }\n      if(!this.game.hitWall(secondPos)){\n        found = \"secondPos\";\n      }\n      count++;\n    }\n\n    if(found === \"firstPos\"){\n      return \"x\";\n    } else if(found === \"secondPos\"){\n      return \"y\";\n    } else {\n      return \"z\";\n    }\n  }\n\n  remove() {\n    this.game.remove(this);\n  }\n}\n\nconst NORMAL_FRAME_TIME_DELTA = 1000/60;\n\nmodule.exports = MovingObject;\n\n\n\n// WEBPACK FOOTER //\n// ./lib/moving_object.js","const MovingObject = require(\"./moving_object\");\nconst Util = require(\"./util\");\n\nfunction randomColor() {\n  const hexDigits = \"0123456789ABCDEF\";\n\n  let color = \"#\";\n  for (let i = 0; i < 3; i ++) {\n    color += hexDigits[Math.floor((Math.random() * 16))];\n  }\n\n  return color;\n}\n\nclass Ship extends MovingObject {\n  constructor(options) {\n    options.radius = Ship.RADIUS;\n    options.vel = options.vel || [0, 0];\n    options.color = \"green\";\n    super(options);\n  }\n\n  power(impulse) {\n    for(let i = 0; i < 2; i++){\n      if(this.pos[0] + (impulse[0]) < 0 || this.pos[0] + (impulse[0]) > this.game.x_limit || this.pos[1] + (impulse[1]) < 0 || this.pos[1] + (impulse[1]) > this.game.y_limit){\n        return;\n      }\n      const current_pos = [this.pos[0], this.pos[1]];\n      this.pos[0] += impulse[0];\n      this.pos[1] += impulse[1];\n      const next_pos = [this.pos[0], this.pos[1]];\n      if(!this.game.started){\n        if(this.game.safePositions.has(current_pos.toString()) && !this.game.safePositions.has(next_pos.toString())){\n          this.game.started = true;\n          this.game.seenPositions.push(current_pos);\n          this.game.seenPositions.push(next_pos);\n          this.game.seenSet.add(current_pos.toString());\n          this.game.seenSet.add(next_pos.toString());\n        }\n      } else {\n        if(this.game.safePositions.has(next_pos.toString())){\n          this.game.started = false;\n        }\n        this.game.seenPositions.push(next_pos);\n        this.game.seenSet.add(next_pos.toString());\n      }\n    }\n  }\n\n  relocate(newPos) {\n    this.pos = [newPos[0], newPos[1]];\n  }\n}\n\nShip.RADIUS = 10;\nmodule.exports = Ship;\n\n\n\n// WEBPACK FOOTER //\n// ./lib/ship.js","// javascript-astar 0.4.1\n// http://github.com/bgrins/javascript-astar\n// Freely distributable under the MIT License.\n// Implements the astar search algorithm in javascript using a Binary Heap.\n// Includes Binary Heap (with modifications) from Marijn Haverbeke.\n// http://eloquentjavascript.net/appendix2.html\n(function(definition) {\n  /* global module, define */\n  if (typeof module === 'object' && typeof module.exports === 'object') {\n    module.exports = definition();\n  } else if (typeof define === 'function' && define.amd) {\n    define([], definition);\n  } else {\n    var exports = definition();\n    window.astar = exports.astar;\n    window.Graph = exports.Graph;\n  }\n})(function() {\n\nfunction pathTo(node) {\n  var curr = node;\n  var path = [];\n  while (curr.parent) {\n    path.unshift(curr);\n    curr = curr.parent;\n  }\n  return path;\n}\n\nfunction getHeap() {\n  return new BinaryHeap(function(node) {\n    return node.f;\n  });\n}\n\nvar astar = {\n  /**\n  * Perform an A* Search on a graph given a start and end node.\n  * @param {Graph} graph\n  * @param {GridNode} start\n  * @param {GridNode} end\n  * @param {Object} [options]\n  * @param {bool} [options.closest] Specifies whether to return the\n             path to the closest node if the target is unreachable.\n  * @param {Function} [options.heuristic] Heuristic function (see\n  *          astar.heuristics).\n  */\n  search: function(graph, start, end, options) {\n    graph.cleanDirty();\n    options = options || {};\n    var heuristic = options.heuristic || astar.heuristics.manhattan;\n    var closest = options.closest || false;\n\n    var openHeap = getHeap();\n    var closestNode = start; // set the start node to be the closest if required\n\n    start.h = heuristic(start, end);\n    graph.markDirty(start);\n\n    openHeap.push(start);\n\n    while (openHeap.size() > 0) {\n\n      // Grab the lowest f(x) to process next.  Heap keeps this sorted for us.\n      var currentNode = openHeap.pop();\n\n      // End case -- result has been found, return the traced path.\n      if (currentNode === end) {\n        return pathTo(currentNode);\n      }\n\n      // Normal case -- move currentNode from open to closed, process each of its neighbors.\n      currentNode.closed = true;\n\n      // Find all neighbors for the current node.\n      var neighbors = graph.neighbors(currentNode);\n\n      for (var i = 0, il = neighbors.length; i < il; ++i) {\n        var neighbor = neighbors[i];\n\n        if (neighbor.closed || neighbor.isWall()) {\n          // Not a valid node to process, skip to next neighbor.\n          continue;\n        }\n\n        // The g score is the shortest distance from start to current node.\n        // We need to check if the path we have arrived at this neighbor is the shortest one we have seen yet.\n        var gScore = currentNode.g + neighbor.getCost(currentNode);\n        var beenVisited = neighbor.visited;\n\n        if (!beenVisited || gScore < neighbor.g) {\n\n          // Found an optimal (so far) path to this node.  Take score for node to see how good it is.\n          neighbor.visited = true;\n          neighbor.parent = currentNode;\n          neighbor.h = neighbor.h || heuristic(neighbor, end);\n          neighbor.g = gScore;\n          neighbor.f = neighbor.g + neighbor.h;\n          graph.markDirty(neighbor);\n          if (closest) {\n            // If the neighbour is closer than the current closestNode or if it's equally close but has\n            // a cheaper path than the current closest node then it becomes the closest node\n            if (neighbor.h < closestNode.h || (neighbor.h === closestNode.h && neighbor.g < closestNode.g)) {\n              closestNode = neighbor;\n            }\n          }\n\n          if (!beenVisited) {\n            // Pushing to heap will put it in proper place based on the 'f' value.\n            openHeap.push(neighbor);\n          } else {\n            // Already seen the node, but since it has been rescored we need to reorder it in the heap\n            openHeap.rescoreElement(neighbor);\n          }\n        }\n      }\n    }\n\n    if (closest) {\n      return pathTo(closestNode);\n    }\n\n    // No result was found - empty array signifies failure to find path.\n    return [];\n  },\n  // See list of heuristics: http://theory.stanford.edu/~amitp/GameProgramming/Heuristics.html\n  heuristics: {\n    manhattan: function(pos0, pos1) {\n      var d1 = Math.abs(pos1.x - pos0.x);\n      var d2 = Math.abs(pos1.y - pos0.y);\n      return d1 + d2;\n    },\n    diagonal: function(pos0, pos1) {\n      var D = 1;\n      var D2 = Math.sqrt(2);\n      var d1 = Math.abs(pos1.x - pos0.x);\n      var d2 = Math.abs(pos1.y - pos0.y);\n      return (D * (d1 + d2)) + ((D2 - (2 * D)) * Math.min(d1, d2));\n    }\n  },\n  cleanNode: function(node) {\n    node.f = 0;\n    node.g = 0;\n    node.h = 0;\n    node.visited = false;\n    node.closed = false;\n    node.parent = null;\n  }\n};\n\n/**\n * A graph memory structure\n * @param {Array} gridIn 2D array of input weights\n * @param {Object} [options]\n * @param {bool} [options.diagonal] Specifies whether diagonal moves are allowed\n */\nfunction Graph(gridIn, options) {\n  options = options || {};\n  this.nodes = [];\n  this.diagonal = !!options.diagonal;\n  this.grid = [];\n  for (var x = 0; x < gridIn.length; x++) {\n    this.grid[x] = [];\n\n    for (var y = 0, row = gridIn[x]; y < row.length; y++) {\n      var node = new GridNode(x, y, row[y]);\n      this.grid[x][y] = node;\n      this.nodes.push(node);\n    }\n  }\n  this.init();\n}\n\nGraph.prototype.init = function() {\n  this.dirtyNodes = [];\n  for (var i = 0; i < this.nodes.length; i++) {\n    astar.cleanNode(this.nodes[i]);\n  }\n};\n\nGraph.prototype.cleanDirty = function() {\n  for (var i = 0; i < this.dirtyNodes.length; i++) {\n    astar.cleanNode(this.dirtyNodes[i]);\n  }\n  this.dirtyNodes = [];\n};\n\nGraph.prototype.markDirty = function(node) {\n  this.dirtyNodes.push(node);\n};\n\nGraph.prototype.neighbors = function(node) {\n  var ret = [];\n  var x = node.x;\n  var y = node.y;\n  var grid = this.grid;\n\n  // West\n  if (grid[x - 1] && grid[x - 1][y]) {\n    ret.push(grid[x - 1][y]);\n  }\n\n  // East\n  if (grid[x + 1] && grid[x + 1][y]) {\n    ret.push(grid[x + 1][y]);\n  }\n\n  // South\n  if (grid[x] && grid[x][y - 1]) {\n    ret.push(grid[x][y - 1]);\n  }\n\n  // North\n  if (grid[x] && grid[x][y + 1]) {\n    ret.push(grid[x][y + 1]);\n  }\n\n  if (this.diagonal) {\n    // Southwest\n    if (grid[x - 1] && grid[x - 1][y - 1]) {\n      ret.push(grid[x - 1][y - 1]);\n    }\n\n    // Southeast\n    if (grid[x + 1] && grid[x + 1][y - 1]) {\n      ret.push(grid[x + 1][y - 1]);\n    }\n\n    // Northwest\n    if (grid[x - 1] && grid[x - 1][y + 1]) {\n      ret.push(grid[x - 1][y + 1]);\n    }\n\n    // Northeast\n    if (grid[x + 1] && grid[x + 1][y + 1]) {\n      ret.push(grid[x + 1][y + 1]);\n    }\n  }\n\n  return ret;\n};\n\nGraph.prototype.toString = function() {\n  var graphString = [];\n  var nodes = this.grid;\n  for (var x = 0; x < nodes.length; x++) {\n    var rowDebug = [];\n    var row = nodes[x];\n    for (var y = 0; y < row.length; y++) {\n      rowDebug.push(row[y].weight);\n    }\n    graphString.push(rowDebug.join(\" \"));\n  }\n  return graphString.join(\"\\n\");\n};\n\nfunction GridNode(x, y, weight) {\n  this.x = x;\n  this.y = y;\n  this.weight = weight;\n}\n\nGridNode.prototype.toString = function() {\n  return \"[\" + this.x + \" \" + this.y + \"]\";\n};\n\nGridNode.prototype.getCost = function(fromNeighbor) {\n  // Take diagonal weight into consideration.\n  if (fromNeighbor && fromNeighbor.x != this.x && fromNeighbor.y != this.y) {\n    return this.weight * 1.41421;\n  }\n  return this.weight;\n};\n\nGridNode.prototype.isWall = function() {\n  return this.weight === 0;\n};\n\nfunction BinaryHeap(scoreFunction) {\n  this.content = [];\n  this.scoreFunction = scoreFunction;\n}\n\nBinaryHeap.prototype = {\n  push: function(element) {\n    // Add the new element to the end of the array.\n    this.content.push(element);\n\n    // Allow it to sink down.\n    this.sinkDown(this.content.length - 1);\n  },\n  pop: function() {\n    // Store the first element so we can return it later.\n    var result = this.content[0];\n    // Get the element at the end of the array.\n    var end = this.content.pop();\n    // If there are any elements left, put the end element at the\n    // start, and let it bubble up.\n    if (this.content.length > 0) {\n      this.content[0] = end;\n      this.bubbleUp(0);\n    }\n    return result;\n  },\n  remove: function(node) {\n    var i = this.content.indexOf(node);\n\n    // When it is found, the process seen in 'pop' is repeated\n    // to fill up the hole.\n    var end = this.content.pop();\n\n    if (i !== this.content.length - 1) {\n      this.content[i] = end;\n\n      if (this.scoreFunction(end) < this.scoreFunction(node)) {\n        this.sinkDown(i);\n      } else {\n        this.bubbleUp(i);\n      }\n    }\n  },\n  size: function() {\n    return this.content.length;\n  },\n  rescoreElement: function(node) {\n    this.sinkDown(this.content.indexOf(node));\n  },\n  sinkDown: function(n) {\n    // Fetch the element that has to be sunk.\n    var element = this.content[n];\n\n    // When at 0, an element can not sink any further.\n    while (n > 0) {\n\n      // Compute the parent element's index, and fetch it.\n      var parentN = ((n + 1) >> 1) - 1;\n      var parent = this.content[parentN];\n      // Swap the elements if the parent is greater.\n      if (this.scoreFunction(element) < this.scoreFunction(parent)) {\n        this.content[parentN] = element;\n        this.content[n] = parent;\n        // Update 'n' to continue at the new position.\n        n = parentN;\n      }\n      // Found a parent that is less, no need to sink any further.\n      else {\n        break;\n      }\n    }\n  },\n  bubbleUp: function(n) {\n    // Look up the target element and its score.\n    var length = this.content.length;\n    var element = this.content[n];\n    var elemScore = this.scoreFunction(element);\n\n    while (true) {\n      // Compute the indices of the child elements.\n      var child2N = (n + 1) << 1;\n      var child1N = child2N - 1;\n      // This is used to store the new position of the element, if any.\n      var swap = null;\n      var child1Score;\n      // If the first child exists (is inside the array)...\n      if (child1N < length) {\n        // Look it up and compute its score.\n        var child1 = this.content[child1N];\n        child1Score = this.scoreFunction(child1);\n\n        // If the score is less than our element's, we need to swap.\n        if (child1Score < elemScore) {\n          swap = child1N;\n        }\n      }\n\n      // Do the same checks for the other child.\n      if (child2N < length) {\n        var child2 = this.content[child2N];\n        var child2Score = this.scoreFunction(child2);\n        if (child2Score < (swap === null ? elemScore : child1Score)) {\n          swap = child2N;\n        }\n      }\n\n      // If the element needs to be moved, swap it, and continue.\n      if (swap !== null) {\n        this.content[n] = this.content[swap];\n        this.content[swap] = element;\n        n = swap;\n      }\n      // Otherwise, we are done.\n      else {\n        break;\n      }\n    }\n  }\n};\n\nreturn {\n  astar: astar,\n  Graph: Graph\n};\n\n});\n\n\n\n// WEBPACK FOOTER //\n// ./lib/astar.js","module.exports = function(module) {\r\n\tif(!module.webpackPolyfill) {\r\n\t\tmodule.deprecate = function() {};\r\n\t\tmodule.paths = [];\r\n\t\t// module.parent = undefined by default\r\n\t\tmodule.children = [];\r\n\t\tmodule.webpackPolyfill = 1;\r\n\t}\r\n\treturn module;\r\n}\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// (webpack)/buildin/module.js\n// module id = 7\n// module chunks = 0","class GameView {\n  constructor(game, ctx) {\n    this.ctx = ctx;\n    this.game = game;\n    this.ship = this.game.addShip(ctx);\n  }\n\n  bindKeyHandlers() {\n    const ship = this.ship;\n\n    Object.keys(GameView.MOVES).forEach((k) => {\n      let move = GameView.MOVES[k];\n      key(k, () => { ship.power(move); });\n    });\n  }\n\n  removeShip(){\n    this.ship.remove();\n  }\n\n  addShip(){\n    this.ship = this.game.addShip(ctx);\n  }\n\n  start() {\n    this.lastTime = 0;\n    //start the animation\n    requestAnimationFrame(this.animate.bind(this));\n  }\n\n  animate(time) {\n    const timeDelta = time - this.lastTime;\n\n    this.game.step(timeDelta);\n    this.game.draw(this.ctx);\n    this.lastTime = time;\n\n    //every call to animate requests causes another call to animate\n    requestAnimationFrame(this.animate.bind(this));\n  }\n}\n\nGameView.MOVES = {\n  \"up\": [ 0, -10],\n  \"left\": [-10,  0],\n  \"down\": [ 0,  10],\n  \"right\": [ 10,  0],\n};\n\nmodule.exports = GameView;\n\n\n\n// WEBPACK FOOTER //\n// ./lib/game_view.js"],"sourceRoot":""}